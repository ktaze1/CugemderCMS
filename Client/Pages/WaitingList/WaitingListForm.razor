@inject HttpClient http

<EditForm Model="@waitingUsers" OnValidSubmit="@OnValidSubmit">
    @foreach (AspNetUsers user in waitingUsers)
    {
        <div class="container">
            <div class="row justify-content-start">
                <p> isim: @user.FirstName @user.SurName</p>

                <select class="form-control"
                        @bind="user.Group">
                    <option value="0">---Grup Seçin---</option>
                    @foreach (var group in groups)
                    {
                        @if (group.Id == groupId)
                        {
                            <option selected value="@group.Id">@group.GroupName</option>
                        }
                        else
                        {
                            <option value="@group.Id">@group.GroupName</option>
                        }

                    }
                </select>
            </div>
        </div>
    }
    @if (waitingUsers.Length > 0)
    {
        <button type="submit"> @ButtonText </button>
    }
</EditForm>

@code {
    [Parameter] public AspNetUsers[] waitingUsers { get; set; }
    [Parameter] public string ButtonText { get; set; } = "Save";
    [Parameter] public EventCallback OnValidSubmit { get; set; }


    public int groupId = 0;
    private List<Groups> groups = new List<Groups>();

    protected override async Task OnInitializedAsync()
    {
        groups = await http.GetFromJsonAsync<List<Groups>>("api/groups");
    }

}